---
import { Icon } from 'astro-icon/components'
import AboutCard from '@components/AboutCard.astro'
import markdownit from 'markdown-it'
import ImageBox from '@components/ImageBox.astro'
const md = markdownit()

import { type OrgModel } from '@ts/Models'

interface Props {
  org: OrgModel;
  logo: string;
  columns: boolean;
}

const iconSize = 20;

const { org, logo, columns = true} = Astro.props;
---
<AboutCard columns={columns}>
  <div class="block">
    <ImageBox 
        square={false}
        src={logo} 
        alt={"Logo of ".concat(org.name)}
          />
  </div>
  <div class="block">
    <p set:html={md.renderInline(org.description)}></p>
  </div>
  <div class="block">
    <ul>
      <li>{org.email && <a href={"mailto:".concat(org.email)}>{org.email}</a>}</li>
      <li>{org.phone && <a href={"tel:".concat(org.phone)}>{org.phone}</a>}</li>
      <li>{org.office.address}</li>
      <li>{org.office.address2}</li>
      <li>{org.office.city}, {org.office.state} {org.office.postal}</li>
    </ul>
  </div>
  {"bookingurl" in org && 
  <div class="block">
    <a href={org.bookingurl} class="button box-shadow">Book a Consultation</a>
  </div>
  }
  <div class="block">
    <hr/>
      {
        org.socials.map((platform) => (
            <span class="icon">
              <a href={platform.url}><Icon name={"mdi:".concat(platform.name.toLowerCase())} size={iconSize} /></a>
            </span>
        ))
      }
    </div>
</AboutCard>